language: cpp

sudo: required

dist: 
    - xenial

services:
    - docker

env:
    - BUILD_TYPE=Default EXEC=chrome SRC=src # TRAVIS_DEBUG_MODE=true

before_install:
    - docker pull seikwon/castanets_69_base:first
    - docker run --name castanets -dit seikwon/castanets_69_base:first /sbin/init

install:
    - docker exec -ti castanets bash -c "cd ~/src && git pull"

before_script:
    - docker exec -ti castanets bash -c "export PATH=\"$PATH:$PWD/depot_tools\""

script:
    - docker exec -ti castanets bash -c "cd ~/src && ninja -C out/Default chrome"
    #    - travis_wait 50 ninja -C out/${BUILD_TYPE} ${EXEC}

notifications:
    email:
        recipients:
            - seikwon.kim@samsung.com
        on_success: change # <always|never|change>
        on_failure: always  # <always|never|change>

